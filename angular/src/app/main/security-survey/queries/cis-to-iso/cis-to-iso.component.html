<div [@routerTransition]>
    <div class="content d-flex flex-column flex-column-fluid">

        <sub-header [title]="'CISTOISO' | localize" [description]="'CisToIsoHeaderInfo' | localize">

            <div role="actions">
            </div>

        </sub-header>

        <div [class]="containerClass">
            <div class="card card-custom gutter-b">
                <div class="card-body">

                    <div class="row align-items-center">

                        <!--<Primeng-TurboTable-Start>-->
                            <div class="primeng-datatable-container" [busyIf]="primengTableHelper.isLoading">

                                <p-table 
                                #dataTable 
                                sortMode="multiple" 
                                (onLazyLoad)="getCisToIso($event)"
                                [value]="primengTableHelper.records"
                                rows="{{ primengTableHelper.defaultRecordsCountPerPage }}" 
                                [paginator]="false"
                                [lazy]="true" 
                                [scrollable]="true" 
                                [rowHover]="true"
                                ScrollWidth="100%" 
                                scrollDirection="horizontal"
                                [responsive]="primengTableHelper.isResponsive"
                                [resizableColumns]="primengTableHelper.resizableColumns">
        

                                <ng-template pTemplate="header">
                                <tr>
                                <!--<th style="min-width: 130px" [hidden]="!(['Pages.Administration.Users.Impersonation', 'Pages.Administration.Users.Edit', 'Pages.Administration.Users.ChangePermissions', 'Pages.Administration.Users.Delete'] | permissionAny)">{{ 'Actions' | localize }}</th>-->
                                <th style="min-width: 100px" pSortableColumn="ciSControl">{{ 'CISControl' | localize }} <p-sortIcon field="ciSControl"></p-sortIcon></th>
                                <th style="min-width: 250px" pSortableColumn="ciSSafeguard">{{ 'CISSafeguard' | localize }} <p-sortIcon field="ciSSafeguard"></p-sortIcon></th>
                                <th style="min-width: 250px" pSortableColumn="assetType">{{ 'AssetType' | localize }}<p-sortIcon field="assetType"></p-sortIcon></th>
                                <th style="min-width: 300px" pSortableColumn="securityFunction">{{ 'SecurityFunction' | localize }} <p-sortIcon field="securityFunction"></p-sortIcon></th>
                                <th style="min-width: 300px" pSortableColumn="title">{{ 'Title' | localize }} <p-sortIcon field="title"></p-sortIcon></th>
                                <th style="min-width: 400px" pSortableColumn="description">{{ 'Description' | localize }} <p-sortIcon field="description"></p-sortIcon></th>
                                <th style="min-width: 100px" pSortableColumn="relationship">{{ 'Relationship' | localize }} <p-sortIcon field="relationship"></p-sortIcon></th>
                                <th style="min-width: 100px" pSortableColumn="iSOIEC270012022">{{ 'ISOIEC270012022' | localize }} <p-sortIcon field="iSOIEC270012022"></p-sortIcon></th>
                                </tr>
                                </ng-template>
        
                                <ng-template pTemplate="body" let-record="$implicit">
                                <tr>
                                <!--
                                <td style="min-width: 130px" [hidden]="!(['Pages.Administration.Users.Impersonation', 'Pages.Administration.Users.Edit', 'Pages.Administration.Users.ChangePermissions', 'Pages.Administration.Users.Delete'] | permissionAny)">
                                <div class="btn-group" dropdown placement="bottom left" container="body">
                                <button id="dropdownButton" type="button" class="btn btn-primary btn-sm dropdown-toggle" dropdownToggle aria-controls="dropdownMenu"><i class="fa fa-cog"></i><span class="caret"></span>{{ 'Actions' | localize }}</button>
                                <ul id="dropdownMenu" class="dropdown-menu" role="menu" *dropdownMenu aria-labelledby="dropdownButton">
                                <li *ngIf="('Pages.Administration.Users.Impersonation' | permission) && record.id !== appSession.userId" role="menuitem"><a href="javascript:;" class="dropdown-item" (click)=" _impersonationService.impersonateUser(record.id, appSession.tenantId)">{{ 'LoginAsThisUser' | localize }}</a></li>
                                <li *ngIf="'Pages.Administration.Users.Edit' | permission" role="menuitem"><a href="javascript:;" class="dropdown-item" (click)="createOrEditUserModal.show(record.id)">{{ 'Edit' | localize }}</a></li>
                                <li *ngIf="'Pages.Administration.Users.ChangePermissions' | permission" role="menuitem"><a href="javascript:;" class="dropdown-item" (click)="editUserPermissionsModal.show(record.id,record.userName)">{{ 'Permissions' | localize }}</a></li>
                                <li *ngIf="'Pages.Administration.Users.Unlock' | permission" role="menuitem"><a href="javascript:;" class="dropdown-item" (click)="unlockUser(record)">{{ 'Unlock' | localize }}</a></li>
                                <li *ngIf="dynamicEntityPropertyManager.canShow('GumAdvisor.Authorization.Users.User')" role="menuitem"><a href="javascript:;" class="dropdown-item" (click)="showDynamicProperties(record)">{{ 'DynamicProperties' | localize }}</a></li>
                                <li *ngIf="'Pages.Administration.Users.Delete' | permission" role="menuitem"><a href="javascript:;" class="dropdown-item" (click)="deleteUser(record)">{{ 'Delete' | localize }}</a></li>
                                </ul>
                                </div>
                                </td>
                                -->
        
                                <td style="min-width: 100px"><span class="p-column-title">{{ 'CISControl' | localize }}</span>{{ record.cisToIso.ciSControl }}</td>
                                <td style="min-width: 250px"><span class="p-column-title">{{ 'CISSafeguard' | localize }}</span>{{ record.cisToIso.ciSSafeguard }}</td>
                                <td style="min-width: 250px"><span class="p-column-title">{{ 'AssetType' | localize }}</span>{{ record.cisToIso.assetType }}</td>
                                <td style="min-width: 300px"><span class="p-column-title">{{ 'SecurityFunction' | localize }}</span>{{ record.cisToIso.securityFunction  }}</td>
                                <td style="min-width: 300px"><span class="p-column-title">{{ 'Title' | localize }}</span>{{ record.cisToIso.title  }}</td>
                                
                                <td style="min-width: 400px"><span class="p-column-title">{{ 'Description' | localize }}</span>
                                    <div style="height: 80px; overflow: auto;">
                                        {{ record.cisToIso.description  }}
                                    </div>
                                </td>
        
                                <td style="min-width: 100px"><span class="p-column-title">{{ 'Relationship' | localize }}</span>{{ record.cisToIso.relationship  }}</td>
                                <td style="min-width: 100px"><span class="p-column-title">{{ 'ISOIEC270012022' | localize }}</span>{{ record.cisToIso.iSOIEC270012022  }}</td>
        
                                </tr>
        
                                </ng-template>
                                </p-table>
        
                                <div class="primeng-no-data" *ngIf="primengTableHelper.totalRecordsCount == 0">{{ 'NoData' | localize }}</div>
        
                                <div class="primeng-paging-container">
                                <p-paginator
                                [rows]="primengTableHelper.defaultRecordsCountPerPage"
                                #paginator
                                (onPageChange)="getCisToIso($event)"
                                [totalRecords]="primengTableHelper.totalRecordsCount"
                                [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage"
                                [showCurrentPageReport]="true" [currentPageReportTemplate]="'TotalRecordsCount' | localize: primengTableHelper.totalRecordsCount">
                                </p-paginator>
                                </div>
                                </div>
                                <!--<Primeng-TurboTable-End>-->


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

